version: 1.1

app:
  env: development
  mode: release
  port: 8080
  trackerDomain: 127.0.0.1
  stats:
    enabled: true
    path: /stats

middleware:
  timeout:
    enabled: false
    ms: 2000
  rateLimiter:
    enabled: false
    period: S
    limit: 10
  cookie:
    enabled: true
    name: nuid
    secure: false
    ttlDays: 365
    domain: 127.0.0.1
    path: /
    sameSite: Lax
  cors:
    enabled: true
    allowOrigin:
      - "*"
    allowCredentials: true
    allowMethods:
      - POST
      - OPTIONS
      - GET
    maxAge: 86400
  requestLogger:
    enabled: false
  yeet:
    enabled: false

snowplow:
  enabled: true
  standardRoutesEnabled: false
  openRedirectsEnabled: false
  getPath: /plw/g
  postPath: /plw/p
  redirectPath: /plw/r
  anonymize:
    ip: true
    userId: true

cloudevents:
  enabled: true
  postPath: /ce/p
  batchPostPath: /ce/bp

generic:
  enabled: true
  postPath: /gen/p
  batchPostPath: /gen/bp
  contexts:
    rootKey: contexts
    schemaKey: schema
    dataKey: payload
  payload:
    rootKey: payload
    schemaKey: schema
    dataKey: data

schemaCache:
  schemaCacheBackend:
    type: fs
    path: /schemas
  ttlSeconds: 300
  maxSizeBytes: 104857600 # 100mb -> 100 * 1024 * 1024
  purge:
    enabled: true
    path: /c/purge
  schemaEndpoints:
    enabled: true

sink:
  type: kafka
  brokers:
    - redpanda-1:29092
    - redpanda-2:29093
    - redpanda-3:29094
  invalidEventTopic: honeypot-invalid-topic
  validEventTopic: honeypot-valid-topic
  produceTimeout: 3

tele:
  enabled: true
  heartbeatMs: 30000
