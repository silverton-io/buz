name: Releaser

on:
  push:
    # tags:
    #   - 'v*'
      branches:
        - gorelease

jobs:
  releaser:
    runs-on: ubuntu-latest
    # strategy:
    #   matrix:
    #     goos: [linux, windows, darwin]
    #     goarch: ["386", amd64, arm64]
    #     exclude:
    #       - goarch: "386"
    #         goos: darwin
    #       - goarch: arm64
    #         goos: windows
    steps:
      # - name: Install Go
      #   uses: actions/setup-go@v2
      #   with:
      #     go-version: 1.18.x

      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Get Version from file
        id: get-version
        uses: juliangruber/read-file-action@v1
        with:
          path: ./.VERSION

      # - name: Release
      #   uses: wangyoucao577/go-release-action@v1.25
      #   with:
      #     github_token: ${{ secrets.GITHUB_TOKEN }}
      #     goos: ${{ matrix.goos }}
      #     goarch: ${{ matrix.goarch }}
      #     build_command: make
      #     binary_name: honeypot
      #     release_tag: ${{ steps.get-version.outputs.content }}
      #     extra_files: LICENSE .VERSION

      - name: Release
        uses: wangyoucao577/go-release-action@v1.25
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          goos: darwin
          goarch: amd64
